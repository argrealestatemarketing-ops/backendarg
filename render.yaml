# Render deployment configuration
services:
- type: web
  name: hr-attendance-backend
  runtime: node
  buildCommand: npm ci --omit=optional
  startCommand: npm run start
  releaseCommand: npm run db:migrate
  envVars:
  - key: NODE_ENV
    value: production
  - key: DATABASE_URL
    sync: true  # Render will auto-sync this when you attach a managed Postgres instance
  - key: JWT_SECRET
    sync: false  # Will be set in Render dashboard
  - key: PORT
    value: 3000
  - key: PGSSLMODE
    value: require
  - key: DISABLE_MONGODB
    value: "true"
  healthCheckPath: /api/health
  autoDeploy: true
